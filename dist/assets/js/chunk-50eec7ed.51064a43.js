(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-50eec7ed"],{"159a":function(t,e,a){"use strict";var i=a("9b6b"),r=a.n(i);r.a},4941:function(t,e,a){"use strict";var i=a("cf83"),r=a.n(i);r.a},"54a1":function(t,e,a){"use strict";var i=a("6c23"),r=a("96f7"),n=(a("159a"),a("2877")),s=Object(n["a"])(r["default"],i["a"],i["b"],!1,null,null,null);s.options.__file="loading.vue",e["default"]=s.exports},"6c23":function(t,e,a){"use strict";var i=function(){var t=this,e=t.$createElement;t._self._c;return t._m(0)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"aligncenter"},[a("div",{staticClass:"spinner"},[a("div",{staticClass:"rect1"}),a("div",{staticClass:"rect2"}),a("div",{staticClass:"rect3"}),a("div",{staticClass:"rect4"}),a("div",{staticClass:"rect5"})])])}];a.d(e,"a",function(){return i}),a.d(e,"b",function(){return r})},"7f7f":function(t,e,a){var i=a("86cc").f,r=Function.prototype,n=/^\s*function ([^ (]*)/,s="name";s in r||a("9e1e")&&i(r,s,{configurable:!0,get:function(){try{return(""+this).match(n)[1]}catch(t){return""}}})},"96f7":function(t,e,a){"use strict";var i=a("b7d2"),r=a.n(i);e["default"]=r.a},"9b6b":function(t,e,a){},b7d2:function(t,e){},cf83:function(t,e,a){},f13a:function(t,e,a){"use strict";a.r(e);var i=function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"paySuccess"},[t.iscomplete?a("div",{staticClass:"wait"},[t._v("等待厨房接单，请您稍等，请勿随意更换座位\n    "),t._m(0)]):a("div",{staticClass:"suc"},[t.detail?a("div",{staticClass:"detail"},[t._v(t._s(t.detail))]):a("div",[a("div",{staticClass:"refuse"},[t._v(t._s(this.showData.model?"取餐号":"餐牌号")+"："+t._s(t.showData.model?t.showData.content.callNumber:t.showData.content.tableNames))]),a("div",{staticClass:"order-info",on:{click:t.orderInfo}},[a("div",{staticClass:"header"},[t._v("订单信息")]),a("p",[t._v("单号："+t._s(t.orderid))]),a("p",[t._v("终端单号: "+t._s(t.showData.content.refOrderId))]),a("p",[t._v("就餐方式: "+t._s(t.showData.content.orderTypeStr))]),a("p",[t._v("下单时间："+t._s(t.showData.content.createdAtStr))]),a("p",[t._v("支付方式："),t._l(t.showData.content.paymentList,function(e,i){return a("span",{key:i},[t._v(t._s(e.payName)+t._s(t.showData.content.paymentList.length-1>i?",":""))])})],2)])]),a("button",{staticClass:"btn",on:{click:t.again}},[t._v("再来一单")])]),t.loading?a("loading"):t._e()],1)},r=[function(){var t=this,e=t.$createElement,a=t._self._c||e;return a("div",{staticClass:"spinner"},[a("div",{staticClass:"rect1"}),a("div",{staticClass:"rect2"}),a("div",{staticClass:"rect3"}),a("div",{staticClass:"rect4"}),a("div",{staticClass:"rect5"})])}],n=(a("7f7f"),a("bc3a")),s=a.n(n),o=a("4328"),c=a.n(o),d=a("54a1"),l={data:function(){return{loading:!1,title:window.localStorage.getItem("welcomeSname"),iscomplete:!0,detail:!1}},activated:function(){this.init()},methods:{init:function(){this.iscomplete=!0,this.showData={model:!1,content:{callNumber:"",tableNames:"",paymentList:[{payName:""}]}},this.orderid=this.$route.query.orderid,this.onCheckDeliverd()},onCheckDeliverd:function(){var t=this,e={appid:window.localStorage.getItem("appid"),storeid:parseInt(window.localStorage.getItem("storeid")),orderid:this.orderid};this.timer=setInterval(function(){"paySuccess"===t.$route.name?s.a.post("../../wx/checkDeliverd",c.a.stringify(e)).then(function(e){var a=e.data;0==a.result?"2"==a.content.type?(clearInterval(t.timer),window.sessionStorage.setItem("orderid",t.orderid),t.getOrderByOrderID()):"3"==a.content.type&&(clearInterval(t.timer),t.iscomplete=!1,t.detail=a.content.detail,window.sessionStorage.setItem("orderid",t.orderid)):-1==a.result?(t.iscomplete=!1,clearInterval(t.timer),t.detail=a.content.detail,window.sessionStorage.setItem("orderid","")):alert(a.errmsg)}):clearInterval(t.timer)},1e3)},getOrderByOrderID:function(){var t=this;this.loading=!0,s.a.post("../../wx/getOrderByOrderID",c.a.stringify({appid:window.localStorage.getItem("appid"),storeid:window.localStorage.getItem("storeid"),orderid:this.orderid})).then(function(e){t.loading=!1;var a=e.data;0==a.result?(t.showData.content=a.content,t.getStoreModel(),t.iscomplete=!0):alert(a.errmsg)})},getStoreModel:function(){var t=this;s.a.post("../../wx/getStoreConfiguration",c.a.stringify({appid:window.localStorage.getItem("appid"),storeid:window.localStorage.getItem("storeid"),brandid:window.localStorage.getItem("brandid")})).then(function(e){var a=e.data;0==a.result?(t.iscomplete=!1,t.showData.model=a.data.callNumberMode):alert(a.errmsg)})},again:function(){this.$router.push({path:"/goods",query:{time:(new Date).getTime()}})},orderInfo:function(){this.$router.push({path:"/orderInfo",query:{orderid:this.$route.query.orderid}})}},beforeDestroy:function(){clearInterval(this.timer)},components:{loading:d["default"]}},u=l,f=(a("4941"),a("2877")),v=Object(f["a"])(u,i,r,!1,null,"b82e5a72",null);v.options.__file="paySuccess.vue";e["default"]=v.exports}}]);
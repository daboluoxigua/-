(window["webpackJsonp"]=window["webpackJsonp"]||[]).push([["chunk-6119bd1f"],{"170b":function(t,e,n){"use strict";var o=n("c74b"),s=n.n(o);s.a},"3d88":function(t,e,n){},8348:function(t,e,n){},b315:function(t,e,n){"use strict";var o=n("8348"),s=n.n(o);s.a},be94:function(t,e,n){"use strict";function o(t,e,n){return e in t?Object.defineProperty(t,e,{value:n,enumerable:!0,configurable:!0,writable:!0}):t[e]=n,t}function s(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{},s=Object.keys(n);"function"===typeof Object.getOwnPropertySymbols&&(s=s.concat(Object.getOwnPropertySymbols(n).filter(function(t){return Object.getOwnPropertyDescriptor(n,t).enumerable}))),s.forEach(function(e){o(t,e,n[e])})}return t}n.d(e,"a",function(){return s})},c17f:function(t,e,n){"use strict";var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"nav"},[n("div",{staticClass:"nav-left",on:{click:t.routerback}},[n("i",{staticClass:"iconfont"},[t._v("")])]),n("h2",[t._v(t._s(t.title))])])},s=[],a={props:["title"],methods:{routerback:function(){return window.history.length<=1?(this.$router.push({path:"/"}),!1):(this.$router.go(-1),!1)}}},i=a,r=(n("b315"),n("2877")),c=Object(r["a"])(i,o,s,!1,null,null,null);c.options.__file="navTop.vue";e["a"]=c.exports},c3b0:function(t,e,n){"use strict";var o=n("3d88"),s=n.n(o);s.a},c74b:function(t,e,n){},cd5f:function(t,e,n){"use strict";n.r(e);var o=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"addressEdit"},[n("navTop",{attrs:{title:t.title}}),n("ul",[n("li",[n("span",[t._v("联系人")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.customer,expression:"customer"}],attrs:{type:"text",placeholder:"姓名"},domProps:{value:t.customer},on:{input:function(e){e.target.composing||(t.customer=e.target.value)}}})]),n("li",[n("span",[t._v("电话")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.phone,expression:"phone"}],attrs:{type:"number",min:"11",max:"11",placeholder:"手机号码"},domProps:{value:t.phone},on:{input:function(e){e.target.composing||(t.phone=e.target.value)}}})]),n("li",[n("span",[t._v("地址")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.mapInfo.address,expression:"mapInfo.address"}],attrs:{type:"text",placeholder:"选择收货地址",readonly:""},domProps:{value:t.mapInfo.address},on:{click:t.mapShow,input:function(e){e.target.composing||t.$set(t.mapInfo,"address",e.target.value)}}})]),n("li",[n("span",[t._v("门牌号")]),n("input",{directives:[{name:"model",rawName:"v-model",value:t.detail,expression:"detail"}],attrs:{type:"text",placeholder:"例：5号楼203室"},domProps:{value:t.detail},on:{input:function(e){e.target.composing||(t.detail=e.target.value)}}})])]),n("button",{staticClass:"btn",on:{click:t.submit}},[t._v("保存并使用")]),n("tmpmap",{ref:"map",on:{mapInfo:t._mapInfo}}),t.loading?n("loading"):t._e()],1)},s=[],a=n("be94"),i=n("c17f"),r=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{directives:[{name:"show",rawName:"v-show",value:t.showFlag,expression:"showFlag"}],staticClass:"_map"},[n("div",{staticClass:"nav"},[n("div",{staticClass:"nav-left",on:{click:t.routerback}},[n("i",{staticClass:"iconfont"},[t._v("")])]),n("h2",[t._v(t._s(t.title))])]),n("div",{staticClass:"amap-page-container"},[n("el-amap-search-box",{staticClass:"search-box",attrs:{"search-option":t.searchOption,"on-search-result":t.onSearchResult}}),n("el-amap",{ref:"map",staticClass:"amap-demo",attrs:{vid:"amapDemo",plugin:t.plugin,zoom:t.zoom,center:t.center,events:t.events}},[n("el-amap-marker",{attrs:{vid:"component-marker",position:t.makerConf.position,content:t.makerConf.content}})],1)],1),n("div",{ref:"adrs",staticClass:"adrs"},[n("ul",t._l(t.list,function(e,o){return n("li",{key:o,class:t.currIndex==o?"active":"",on:{click:function(n){t.select(e,o)}}},[t.currIndex==o?n("span",{staticClass:"iconfont"},[n("img",{attrs:{src:"https://webapi.amap.com/theme/v1.3/markers/b/mark_bs.png",alt:""}})]):n("span",{staticClass:"iconfont icon-quanzi"}),n("p",{staticClass:"address"},[t._v(t._s(e.address))]),n("p",{staticClass:"address"},[t._v(t._s(e.name))])])}))])])},c=[],l=n("1fba"),u={data:function(){var t=this;return t.city=t.city||"深圳",{showFlag:!1,title:"确认收货地址",list:[],Search:"深圳",currIndex:0,zoom:16,center:[114.076261,22.545037],lng:0,lat:0,events:{init:function(e){e.setCity(t.city,function(e){e&&e.length>0&&(console.log(t.zoom),t.zoom=16,t.makerConf.position=e,t.getList(e))}),document.getElementsByClassName("amap-logo")[0].style.display="none",document.getElementsByClassName("amap-copyright")[0].style.visibility="hidden"},movestart:function(){document.getElementsByClassName("amap-icon")[0]&&(document.getElementsByClassName("amap-icon")[0].style.top="-10px")},mapmove:function(){var e=this.getCenter();t.makerConf.position=[e.lng,e.lat]},moveend:function(e){var n=this.getCenter(),o=[n.lng,n.lat];t.makerConf.position=[n.lng,n.lat],document.getElementsByClassName("amap-icon")[0]&&(document.getElementsByClassName("amap-icon")[0].style.top="0"),t.getList(o)}},makerConf:{position:[114.076261,22.545037],content:""},searchOption:{city:t.city,citylimit:!0},plugin:[{enableHighAccuracy:!0,timeout:100,maximumAge:0,convert:!0,showButton:!0,buttonPosition:"RB",showMarker:!0,showCircle:!0,panToLocation:!0,zoomToAccuracy:!0,extensions:"all",pName:"Geolocation",events:{init:function(e){e.getCurrentPosition(function(e,n){console.log(n),n&&n.position&&(t.zoom=17,t.lng=n.position.lng,t.lat=n.position.lat,t.center=[t.lng,t.lat],t.$nextTick())})},complete:function(e){console.log(e);var n=e.formattedAddress,o=e.position,s={address:n,name:"",location:o};t.list=[s],t.makerConf.position=[o.lng,o.lat]},error:function(){}}}]}},mounted:function(){var t=this;this.$nextTick(function(){t.scroll?t.scroll.refresh():t.scroll=new l["a"](t.$refs.adrs,{click:!0})})},methods:{show:function(){this.showFlag=!0},routerback:function(){this.showFlag=!1},select:function(t,e){var n=this;n.currIndex=e;var o=t.location;n.makerConf.position=[o.lng,o.lat],n.center=[o.lng,o.lat],this.showFlag=!1;var s={address:t.address,location:[o.lng,o.lat]};this.$emit("mapInfo",s)},getList:function(t){var e=this;e.$Geocoder({lnglatXY:t,success:function(t){t.regeocode&&t.regeocode.pois?e.list=t.regeocode.pois:e.list=[]},error:function(t){e.list=[]}}),this.scroll.refresh()},onSearchResult:function(t){var e=this;if(e.$refs.map.$$getInstance(),t&&t.length>0){var n=t[0],o=n["lng"],s=n["lat"];e.center=[o,s],e.makerConf.position=[o,s],e.list=t}else e.list=[];this.scroll.refresh()},$Geocoder:function(t){t=t||{},AMap&&AMap.plugin(["AMap.Geocoder"],function(){var e=new AMap.Geocoder({radius:t.radius||1e3,extensions:t.extensions||"all"}),n=t.lnglatXY||[114.397169,30.50576];e.getAddress(n,function(e,n){"complete"===e&&"OK"===n.info?t.success&&t.success(n):t.error&&t.error(e,n)})})}},watch:{list:function(){this.currIndex=0}}},m=u,p=(n("170b"),n("2877")),d=Object(p["a"])(m,r,c,!1,null,"260d089f",null);d.options.__file="map.vue";var f=d.exports,h=n("bc3a"),g=n.n(h),v=n("4328"),b=n.n(v),y=n("54a1"),w=n("2f62"),C=n("76a0"),_={data:function(){return{title:"填写收货信息",loading:!1,mapInfo:{address:""},customer:"",phone:"",detail:""}},created:function(){if(this.$route.query.customer){var t=this.$route.query;console.log(t),this.customer=t.customer,this.phone=t.phone,this.detail=t.detail,this.mapInfo={address:t.address,location:t.xy}}},methods:Object(a["a"])({},Object(w["c"])(["set_addressInfo"]),{mapShow:function(){this.$refs.map.show()},_mapInfo:function(t){this.mapInfo=t},submit:function(){var t=this;if(!this.customer.length>0)return Object(C["Toast"])({className:"toasts",message:"请填写联系人姓名"}),!1;if(!/^1[34578]\d{9}$/.test(this.phone))return Object(C["Toast"])({className:"toasts",message:"手机号码有误,请重填"}),!1;if(!this.mapInfo.address.length>0)return Object(C["Toast"])({className:"toasts",message:"选择收货地址"}),!1;if(!this.detail.length>0)return Object(C["Toast"])({className:"toasts",message:"请填写门牌号"}),!1;var e={appid:window.localStorage.getItem("appid"),storeid:window.localStorage.getItem("storeid"),customerid:window.sessionStorage.getItem("openid"),customer:this.customer,phone:this.phone,address:this.mapInfo.address,detail:this.detail,xy:JSON.stringify(this.mapInfo.location),id:this.$route.query.id,defaultCheck:1};this.loading=!0,g.a.post("../../wx/updateDeliverCustomerInfo",b.a.stringify(e)).then(function(n){t.loading=!1,0==n.data.result&&(t.set_addressInfo(e),setTimeout(function(){t.$router.go(-2)},500))})}}),components:{navTop:i["a"],tmpmap:f,loading:y["default"]}},k=_,x=(n("c3b0"),Object(p["a"])(k,o,s,!1,null,"2196442b",null));x.options.__file="addressEdit.vue";e["default"]=x.exports}}]);